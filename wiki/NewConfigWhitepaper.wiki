#summary Whitepaper for new ideas for a new config file

Updated, this is how the config of lsyncd2 is roughly going to look like. It uses the LUA parser/vm to gather the behaviour configuration.

To configure a default rsync behaviour:

{{{
settings = (
  logfile="/log/lsyncd",
)
-- (this is a comment, btw) 
sync{source="/path/to/dir", target="host::module/somewhere/", default.rsync}
}}}

You will be able to specify special behavior on moves of directory within the watched tree

{{{
function mymove(from, to)
    exec("/bin/ssh", "user@remotehost", "mv", from.pathname, to.pathname)
end

sync{source="/path/to/dir", target="host::module/somewhere/", default.rsync, onmove = mymove}
}}}

Or instead of inheriting default behavior for rsync you can do you own stuff

{{{
function myaction(inlet)
    local event = inlet.next_event()
    exec("/usr/local/bin/myfuncyting", event.sourcename)
end

sync{source="/path/to/dir", target="host::module/somewhere/", action = myaction}
}}}